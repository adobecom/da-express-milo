"use strict";import y from"colorjs.io";export class ColorController{constructor(r,{manageAs:s}={}){this._color=new y("hsv",[0,100,100],1);this.host=r,this.manageAs=s}get color(){return this._color}validateColorString(r){var m,C,M,O;const s={spaceId:null,coords:[0,0,0],isValid:!1,alpha:1},t=[/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d*\.?\d+)\s*\)/i,/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/i,/^rgba\s+(\d{1,3})\s+(\d{1,3})\s+(\d{1,3})\s+(0|0?\.\d+|1)\s*$/i,/^rgb\s+(\d{1,3})\s+(\d{1,3})\s+(\d{1,3})\s*$/i,/^rgba\(\s*(\d{1,3})\s+(\d{1,3})\s+(\d{1,3})\s+(\d*\.?\d+)\s*\)$/i,/^rgb\(\s*(\d{1,3})\s+(\d{1,3})\s+(\d{1,3})\s*\)$/i,/rgb\(\s*(100|[0-9]{1,2}%)\s*,\s*(100|[0-9]{1,2}%)\s*,\s*(100|[0-9]{1,2}%)\s*\)/i,/rgba\(\s*(100|[0-9]{1,2})%\s*,\s*(100|[0-9]{1,2})%\s*,\s*(100|[0-9]{1,2})%\s*,\s*(\d*\.?\d+)\s*\)/i],o=[/hsla\(\s*(\d{1,3})\s*,\s*(\d{1,3}%?)\s*,\s*(\d{1,3}%?)\s*,\s*(\d*\.?\d+)\s*\)/i,/hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3}%?)\s*,\s*(\d{1,3}%?)\s*\)/i,/^hsla\s+(\d{1,3})\s+(\d{1,3}%?)\s+(\d{1,3}%?)\s+(\d*\.?\d+)\s*$/i,/^hsl\s+(\d{1,3})\s+(\d{1,3}%?)\s+(\d{1,3}%?)\s*$/i,/^hsla\(\s*(\d{1,3})\s+(\d{1,3}%?)\s+(\d{1,3}%?)\s+(\d*\.?\d+)\s*\)$/i,/^hsl\(\s*(\d{1,3})\s+(\d{1,3}%?)\s+(\d{1,3}%?)\s*\)$/i],e=[/hsva\(\s*(\d{1,3})\s*,\s*(\d{1,3}%?)\s*,\s*(\d{1,3}%?)\s*,\s*(\d*\.?\d+)\s*\)/i,/hsv\(\s*(\d{1,3})\s*,\s*(\d{1,3}%?)\s*,\s*(\d{1,3}%?)\s*\)/i,/^hsva\s+(\d{1,3})\s+(\d{1,3}%?)\s+(\d{1,3}%?)\s+(\d*\.?\d+)\s*$/i,/^hsv\s+(\d{1,3})\s+(\d{1,3}%?)\s+(\d{1,3}%?)\s*$/i,/^hsva\(\s*(\d{1,3})\s+(\d{1,3}%?)\s+(\d{1,3}%?)\s+(\d*\.?\d+)\s*\)$/i,/^hsv\(\s*(\d{1,3})\s+(\d{1,3}%?)\s+(\d{1,3}%?)\s*\)$/i],n=[/^#([A-Fa-f0-9]{6})(?:\s*([01](?:\.\d+)?))?$/,/^#([A-Fa-f0-9]{3})(?:\s*([01](?:\.\d+)?))?$/],a=(m=t.find(i=>i.test(r)))==null?void 0:m.exec(r),p=(C=o.find(i=>i.test(r)))==null?void 0:C.exec(r),f=(M=e.find(i=>i.test(r)))==null?void 0:M.exec(r),_=(O=n.find(i=>i.test(r)))==null?void 0:O.exec(r);if(a){const[,i,$,u,c]=a.filter(v=>typeof v=="string"),g=c===void 0?1:Number(c),l=v=>v.includes("%")?Number(v.replace("%",""))/100:Number(v)/255,d=l(i),h=l($),b=l(u);s.spaceId="srgb",s.coords=[d,h,b],s.alpha=g,s.isValid=d>=0&&d<=1&&h>=0&&h<=1&&b>=0&&b<=1&&g>=0&&g<=1}else if(p){const[,i,$,u,c]=p,g=[i,$,u,c===void 0?"1":c].map(v=>Number(v.replace(/[^\d.]/g,""))),[l,d,h,b]=g;s.spaceId="hsl",s.coords=[l,d,h],s.alpha=b,s.isValid=l>=0&&l<=360&&d>=0&&d<=100&&h>=0&&h<=100&&b>=0&&b<=1}else if(f){const[,i,$,u,c]=f,g=[i,$,u,c===void 0?"1":c].map(v=>Number(v.replace(/[^\d.]/g,""))),[l,d,h,b]=g;s.spaceId="hsv",s.coords=[l,d,h],s.alpha=b,s.isValid=l>=0&&l<=360&&d>=0&&d<=100&&h>=0&&h<=100&&b>=0&&b<=1}else if(_){const[,i,$]=_,u=h=>(h.length===1&&(h=h+h),parseInt(h,16)/255);let c,g,l;i.length===3?(c=u(i.substring(0,1)),g=u(i.substring(1,2)),l=u(i.substring(2,3))):(c=u(i.substring(0,2)),g=u(i.substring(2,4)),l=u(i.substring(4,6)));const d=$?Number($):1;s.spaceId="srgb",s.coords=[c,g,l],s.alpha=d,s.isValid=c>=0&&c<=1&&g>=0&&g<=1&&l>=0&&l<=1&&d>=0&&d<=1}return s}get colorOrigin(){return this._colorOrigin}set colorOrigin(r){this._colorOrigin=r}set color(r){this._colorOrigin=r;let s;if(typeof r=="string"){const t=this.validateColorString(r);if(t.isValid){const[o,e,n]=t.coords;s=new y(`${t.spaceId}`,[o,e,n],t.alpha)}else try{y.parse(r)}catch(o){try{s=new y(`#${r}`)}catch(e){return}}}else if(r instanceof y)s=r;else if(!Array.isArray(r)){const{h:t,s:o,l:e,v:n,r:a,g:p,b:f,a:_}=r;if(typeof t!="undefined"&&typeof o!="undefined"){const m=e!=null?e:n;s=new y(typeof e!="undefined"?"hsl":"hsv",[parseFloat(t),typeof o!="string"?o*100:parseFloat(o),typeof m!="string"?m*100:parseFloat(m)],parseFloat(_||"1"))}else typeof a!="undefined"&&typeof p!="undefined"&&typeof f!="undefined"&&(s=new y("srgb",[parseFloat(a)/255,parseFloat(p)/255,parseFloat(f)/255],parseFloat(_||"1")))}s||(s=new y(r)),this.manageAs?this._color=s.to(this.manageAs):this._color=s,this.host.requestUpdate()}get colorValue(){if(typeof this._colorOrigin=="string"){let s="";switch(this._colorOrigin.startsWith("#")?s="hex string":this._colorOrigin.startsWith("rgb")?s="rgb":this._colorOrigin.startsWith("hsl")?s="hsl":this._colorOrigin.startsWith("hsv")?s="hsv":s="hex",s){case"hsv":{const t=this._colorOrigin[3]==="a",{h:o,s:e,v:n}=this._color.to("hsv").hsv,a=this._color.alpha;return`hsv${t?"a":""}(${Math.round(o)}, ${Math.round(e)}%, ${Math.round(n)}%${t?`, ${a}`:""})`}case"hsl":{const t=this._colorOrigin[3]==="a",{h:o,s:e,l:n}=this._color.to("hsl").hsl,a=this._color.alpha;return`hsl${t?"a":""}(${Math.round(o)}, ${Math.round(e)}%, ${Math.round(n)}%${t?`, ${a}`:""})`}case"hex string":{const{r:t,g:o,b:e}=this._color.to("srgb").srgb,n=this._colorOrigin.length===5||this._colorOrigin.length===9,a=this._color.alpha,p=Math.round(t*255).toString(16),f=Math.round(o*255).toString(16),_=Math.round(e*255).toString(16),m=Math.round(a*255).toString(16);return`#${p.padStart(2,"0")}${f.padStart(2,"0")}${_.padStart(2,"0")}${n?m.padStart(2,"0"):""}`}case"hex":{const{r:t,g:o,b:e}=this._color.to("srgb").srgb,n=this._colorOrigin.length===4||this._colorOrigin.length===8,a=this._color.alpha,p=Math.round(t*255).toString(16),f=Math.round(o*255).toString(16),_=Math.round(e*255).toString(16),m=Math.round(a*255).toString(16);return`${p.padStart(2,"0")}${f.padStart(2,"0")}${_.padStart(2,"0")}${n?m.padStart(2,"0"):""}`}default:{const{r:t,g:o,b:e}=this._color.to("srgb").srgb,n=this._colorOrigin[3]==="a",a=this._color.alpha;return this._colorOrigin.search("%")>-1?`rgb${n?"a":""}(${Math.round(t*100)}%, ${Math.round(o*100)}%, ${Math.round(e*100)}%${n?`,${Math.round(a*100)}%`:""})`:`rgb${n?"a":""}(${Math.round(t*255)}, ${Math.round(o*255)}, ${Math.round(e*255)}${n?`, ${a}`:""})`}}}let r;if(this._colorOrigin)try{({spaceId:r}=new y(this._colorOrigin))}catch(s){const{h:t,s:o,l:e,v:n,r:a,g:p,b:f}=this._colorOrigin;typeof t!="undefined"&&typeof o!="undefined"&&typeof e!="undefined"?r="hsl":typeof t!="undefined"&&typeof o!="undefined"&&typeof n!="undefined"?r="hsv":typeof a!="undefined"&&typeof p!="undefined"&&typeof f!="undefined"&&(r="srgb")}else({spaceId:r}=this.color);switch(r){case"hsv":{const{h:s,s:t,v:o}=this._color.to("hsv").hsv;return{h:s,s:t/100,v:o/100,a:this._color.alpha}}case"hsl":{const{h:s,s:t,l:o}=this._color.to("hsl").hsl;return{h:s,s:t/100,l:o/100,a:this._color.alpha}}case"srgb":{const{r:s,g:t,b:o}=this._color.to("srgb").srgb;return this._colorOrigin&&typeof this._colorOrigin.r=="string"&&this._colorOrigin.r.search("%")?{r:`${Math.round(s*255)}%`,g:`${Math.round(t*255)}%`,b:`${Math.round(o*255)}%`,a:this._color.alpha}:{r:Math.round(s*255),g:Math.round(t*255),b:Math.round(o*255),a:this._color.alpha}}}return this._color}get hue(){return Number(this._color.to("hsl").hsl.h)}set hue(r){this._color.set("h",r),this.host.requestUpdate()}getColor(r){if(typeof r=="string"&&!["srgb","hsva","hsv","hsl","hsla"].includes(r))throw new Error("not a valid format");return this._color.to(r)}getHslString(){return this._color.to("hsl").toString()}savePreviousColor(){this._previousColor=this._color.clone()}restorePreviousColor(){this._color=this._previousColor}}
//# sourceMappingURL=ColorController.js.map
